---
title: "International Relations Research with R"
categories:
  - Academic Research
tags:
  - R
  - software
  - International Relations
  - research
---

I've spent much of the last few weeks helping students execute their senior thesis research in R. My students are smart and there are 

Here are some of the R packages and techniques that I have found to be most useful in International Relations (IR) research. I'm writing this as a note to my future self as much as anything, but maybe others will find it useful.

## IR Data Structures

### Useful Packages

[countrycode](https://github.com/vincentarelbundock/countrycode) converts between a large number of country identifier schemes.

[states](https://github.com/andybega/states) makes it very easy to create empty frames of country-years `state_panel` command. The `sfind` command is also very useful for looking up country codes.

I haven't used the [peacesciencer](https://github.com/svmiller/peacesciencer) package as it is very new, but it appears to improve on `states` with the ability to create not only country-year datasets, but directed and undirected dyad-years. It can also seamlessly merge in several Correlates of War and related datasets. 

### Creating Your Own Dyads and Dyad-Years From Scratch

If you need to create your own dyads or dyad-years, you could do something like the following using the unique values of the country variable in a dataset. You can use `states::state_panel()` to create a country list if you don't already have one.

```r
library(states)

states <- state_panel(start = 2016, end = 2017, useGW = TRUE)

head(states)

  gwcode year
1      2 2016
2      2 2017
3     20 2016
4     20 2017
5     31 2016
6     31 2017

# use expand.grid on the unique values of each variable
dyads <- expand.grid(statea = unique(states$gwcode), stateb = unique(states$gwcode), year = unique(states$year))

# remove self-self dyads
dyads <- subset(dyads, statea != stateb)

# sort in the conventional IR way
dyads <- dyads[with(dyads, order(statea, stateb, year)),]

# reset row numbers
rownames(dyads) <- NULL

head(dyads)

  statea stateb year
1      2     20 2016
2      2     20 2017
3      2     31 2016
4      2     31 2017
5      2     40 2016
6      2     40 2017
```

We now have a row for every combination of states and years in our original dataset. `tidyr` has its own version of `expand_grid`. I didn't use it here because it doesn't allow the same vector to be used twice, but it is faster, so it might be preferable for larger numbers of years.

### Expanding Date Sequences


### Aggregating Data

## IR Datasets

- WDI
- pwt
- unvotes
- subX
- UCDP?
- WVS?

## Other Data Tools

### Cleaning Column Names

### Merging Data

### Recoding Variables

- sjmisc
- tidyverse
- haven
- data.table
- janitor
- fst
- tsibble
- tidygeocoder

## Visualization

- ggplot2
- plotly
- sjPlot

## Analysis

- fixest / bife / survival::clogit / expandar
- ggeffect
- coeftest / multiwaycov

## Output

- modelsummary